<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Frame 5 - Context Window</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        .container {
            width: 100vw;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #f5f5f5;
        }
        svg {
            max-width: 100%;
            max-height: 100%;
            width: auto;
            height: auto;
        }
        @media (prefers-color-scheme: dark) {
            .container {
                background: #1e1e1e;
            }
        }
    </style>
</head>
<body>
    <div class="container" id="container">
        Loading diagram...
    </div>
    <script>
        // Frame 5 coordinates
        const frameCoords = {
            x: 1956,
            y: -497,
            width: 1055,
            height: 930
        };

        async function loadFrame() {
            const isDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            const svgFile = isDark ? 'all-diagrams.excalidraw.dark.svg' : 'all-diagrams.excalidraw.light.svg';

            try {
                const response = await fetch(svgFile);
                const svgText = await response.text();

                // Parse SVG and update viewBox
                const parser = new DOMParser();
                const svgDoc = parser.parseFromString(svgText, 'image/svg+xml');
                const svgElement = svgDoc.querySelector('svg');

                if (svgElement) {
                    // Set viewBox to show only Frame 5 with padding
                    const padding = 50;
                    svgElement.setAttribute('viewBox',
                        `${frameCoords.x - padding} ${frameCoords.y - padding} ${frameCoords.width + padding * 2} ${frameCoords.height + padding * 2}`
                    );
                    svgElement.setAttribute('width', '100%');
                    svgElement.setAttribute('height', '100%');

                    document.getElementById('container').innerHTML = svgElement.outerHTML;
                }
            } catch (error) {
                document.getElementById('container').innerHTML = 'Error loading diagram: ' + error.message;
            }
        }

        // Load on page load
        loadFrame();

        // Reload on theme change
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', loadFrame);
    </script>
</body>
</html>